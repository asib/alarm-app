try{self["workbox:core:7.0.0"]&&_()}catch{}const Ue=(t,...e)=>{let n=t;return e.length>0&&(n+=` :: ${JSON.stringify(e)}`),n},ke=Ue;class h extends Error{constructor(e,n){const r=ke(e,n);super(r),this.name=e,this.details=n}}const De=new Set,f={googleAnalytics:"googleAnalytics",precache:"precache-v2",prefix:"workbox",runtime:"runtime",suffix:typeof registration<"u"?registration.scope:""},L=t=>[f.prefix,t,f.suffix].filter(e=>e&&e.length>0).join("-"),Te=t=>{for(const e of Object.keys(f))t(e)},T={updateDetails:t=>{Te(e=>{typeof t[e]=="string"&&(f[e]=t[e])})},getGoogleAnalyticsName:t=>t||L(f.googleAnalytics),getPrecacheName:t=>t||L(f.precache),getPrefix:()=>f.prefix,getRuntimeName:t=>t||L(f.runtime),getSuffix:()=>f.suffix};function Y(t,e){const n=new URL(t);for(const r of e)n.searchParams.delete(r);return n.href}async function Pe(t,e,n,r){const a=Y(e.url,n);if(e.url===a)return t.match(e,r);const s=Object.assign(Object.assign({},r),{ignoreSearch:!0}),i=await t.keys(e,s);for(const c of i){const o=Y(c.url,n);if(a===o)return t.match(c,r)}}let b;function Ie(){if(b===void 0){const t=new Response("");if("body"in t)try{new Response(t.body),b=!0}catch{b=!1}b=!1}return b}class Le{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}async function Se(){for(const t of De)await t()}const Ke=t=>new URL(String(t),location.href).href.replace(new RegExp(`^${location.origin}`),"");function Ee(t){return new Promise(e=>setTimeout(e,t))}function J(t,e){const n=e();return t.waitUntil(n),n}async function Ne(t,e){let n=null;if(t.url&&(n=new URL(t.url).origin),n!==self.location.origin)throw new h("cross-origin-copy-response",{origin:n});const r=t.clone(),s={headers:new Headers(r.headers),status:r.status,statusText:r.statusText},i=Ie()?r.body:await r.blob();return new Response(i,s)}function Oe(){self.addEventListener("activate",()=>self.clients.claim())}try{self["workbox:precaching:7.0.0"]&&_()}catch{}const Ae="__WB_REVISION__";function We(t){if(!t)throw new h("add-to-cache-list-unexpected-type",{entry:t});if(typeof t=="string"){const s=new URL(t,location.href);return{cacheKey:s.href,url:s.href}}const{revision:e,url:n}=t;if(!n)throw new h("add-to-cache-list-unexpected-type",{entry:t});if(!e){const s=new URL(n,location.href);return{cacheKey:s.href,url:s.href}}const r=new URL(n,location.href),a=new URL(n,location.href);return r.searchParams.set(Ae,e),{cacheKey:r.href,url:a.href}}class je{constructor(){this.updatedURLs=[],this.notUpdatedURLs=[],this.handlerWillStart=async({request:e,state:n})=>{n&&(n.originalRequest=e)},this.cachedResponseWillBeUsed=async({event:e,state:n,cachedResponse:r})=>{if(e.type==="install"&&n&&n.originalRequest&&n.originalRequest instanceof Request){const a=n.originalRequest.url;r?this.notUpdatedURLs.push(a):this.updatedURLs.push(a)}return r}}}class Fe{constructor({precacheController:e}){this.cacheKeyWillBeUsed=async({request:n,params:r})=>{const a=(r==null?void 0:r.cacheKey)||this._precacheController.getCacheKeyForURL(n.url);return a?new Request(a,{headers:n.headers}):n},this._precacheController=e}}try{self["workbox:strategies:7.0.0"]&&_()}catch{}function M(t){return typeof t=="string"?new Request(t):t}class qe{constructor(e,n){this._cacheKeys={},Object.assign(this,n),this.event=n.event,this._strategy=e,this._handlerDeferred=new Le,this._extendLifetimePromises=[],this._plugins=[...e.plugins],this._pluginStateMap=new Map;for(const r of this._plugins)this._pluginStateMap.set(r,{});this.event.waitUntil(this._handlerDeferred.promise)}async fetch(e){const{event:n}=this;let r=M(e);if(r.mode==="navigate"&&n instanceof FetchEvent&&n.preloadResponse){const i=await n.preloadResponse;if(i)return i}const a=this.hasCallback("fetchDidFail")?r.clone():null;try{for(const i of this.iterateCallbacks("requestWillFetch"))r=await i({request:r.clone(),event:n})}catch(i){if(i instanceof Error)throw new h("plugin-error-request-will-fetch",{thrownErrorMessage:i.message})}const s=r.clone();try{let i;i=await fetch(r,r.mode==="navigate"?void 0:this._strategy.fetchOptions);for(const c of this.iterateCallbacks("fetchDidSucceed"))i=await c({event:n,request:s,response:i});return i}catch(i){throw a&&await this.runCallbacks("fetchDidFail",{error:i,event:n,originalRequest:a.clone(),request:s.clone()}),i}}async fetchAndCachePut(e){const n=await this.fetch(e),r=n.clone();return this.waitUntil(this.cachePut(e,r)),n}async cacheMatch(e){const n=M(e);let r;const{cacheName:a,matchOptions:s}=this._strategy,i=await this.getCacheKey(n,"read"),c=Object.assign(Object.assign({},s),{cacheName:a});r=await caches.match(i,c);for(const o of this.iterateCallbacks("cachedResponseWillBeUsed"))r=await o({cacheName:a,matchOptions:s,cachedResponse:r,request:i,event:this.event})||void 0;return r}async cachePut(e,n){const r=M(e);await Ee(0);const a=await this.getCacheKey(r,"write");if(!n)throw new h("cache-put-with-no-response",{url:Ke(a.url)});const s=await this._ensureResponseSafeToCache(n);if(!s)return!1;const{cacheName:i,matchOptions:c}=this._strategy,o=await self.caches.open(i),l=this.hasCallback("cacheDidUpdate"),d=l?await Pe(o,a.clone(),["__WB_REVISION__"],c):null;try{await o.put(a,l?s.clone():s)}catch(u){if(u instanceof Error)throw u.name==="QuotaExceededError"&&await Se(),u}for(const u of this.iterateCallbacks("cacheDidUpdate"))await u({cacheName:i,oldResponse:d,newResponse:s.clone(),request:a,event:this.event});return!0}async getCacheKey(e,n){const r=`${e.url} | ${n}`;if(!this._cacheKeys[r]){let a=e;for(const s of this.iterateCallbacks("cacheKeyWillBeUsed"))a=M(await s({mode:n,request:a,event:this.event,params:this.params}));this._cacheKeys[r]=a}return this._cacheKeys[r]}hasCallback(e){for(const n of this._strategy.plugins)if(e in n)return!0;return!1}async runCallbacks(e,n){for(const r of this.iterateCallbacks(e))await r(n)}*iterateCallbacks(e){for(const n of this._strategy.plugins)if(typeof n[e]=="function"){const r=this._pluginStateMap.get(n);yield s=>{const i=Object.assign(Object.assign({},s),{state:r});return n[e](i)}}}waitUntil(e){return this._extendLifetimePromises.push(e),e}async doneWaiting(){let e;for(;e=this._extendLifetimePromises.shift();)await e}destroy(){this._handlerDeferred.resolve(null)}async _ensureResponseSafeToCache(e){let n=e,r=!1;for(const a of this.iterateCallbacks("cacheWillUpdate"))if(n=await a({request:this.request,response:n,event:this.event})||void 0,r=!0,!n)break;return r||n&&n.status!==200&&(n=void 0),n}}class Be{constructor(e={}){this.cacheName=T.getRuntimeName(e.cacheName),this.plugins=e.plugins||[],this.fetchOptions=e.fetchOptions,this.matchOptions=e.matchOptions}handle(e){const[n]=this.handleAll(e);return n}handleAll(e){e instanceof FetchEvent&&(e={event:e,request:e.request});const n=e.event,r=typeof e.request=="string"?new Request(e.request):e.request,a="params"in e?e.params:void 0,s=new qe(this,{event:n,request:r,params:a}),i=this._getResponse(s,r,n),c=this._awaitComplete(i,s,r,n);return[i,c]}async _getResponse(e,n,r){await e.runCallbacks("handlerWillStart",{event:r,request:n});let a;try{if(a=await this._handle(n,e),!a||a.type==="error")throw new h("no-response",{url:n.url})}catch(s){if(s instanceof Error){for(const i of e.iterateCallbacks("handlerDidError"))if(a=await i({error:s,event:r,request:n}),a)break}if(!a)throw s}for(const s of e.iterateCallbacks("handlerWillRespond"))a=await s({event:r,request:n,response:a});return a}async _awaitComplete(e,n,r,a){let s,i;try{s=await e}catch{}try{await n.runCallbacks("handlerDidRespond",{event:a,request:r,response:s}),await n.doneWaiting()}catch(c){c instanceof Error&&(i=c)}if(await n.runCallbacks("handlerDidComplete",{event:a,request:r,response:s,error:i}),n.destroy(),i)throw i}}class y extends Be{constructor(e={}){e.cacheName=T.getPrecacheName(e.cacheName),super(e),this._fallbackToNetwork=e.fallbackToNetwork!==!1,this.plugins.push(y.copyRedirectedCacheableResponsesPlugin)}async _handle(e,n){const r=await n.cacheMatch(e);return r||(n.event&&n.event.type==="install"?await this._handleInstall(e,n):await this._handleFetch(e,n))}async _handleFetch(e,n){let r;const a=n.params||{};if(this._fallbackToNetwork){const s=a.integrity,i=e.integrity,c=!i||i===s;r=await n.fetch(new Request(e,{integrity:e.mode!=="no-cors"?i||s:void 0})),s&&c&&e.mode!=="no-cors"&&(this._useDefaultCacheabilityPluginIfNeeded(),await n.cachePut(e,r.clone()))}else throw new h("missing-precache-entry",{cacheName:this.cacheName,url:e.url});return r}async _handleInstall(e,n){this._useDefaultCacheabilityPluginIfNeeded();const r=await n.fetch(e);if(!await n.cachePut(e,r.clone()))throw new h("bad-precaching-response",{url:e.url,status:r.status});return r}_useDefaultCacheabilityPluginIfNeeded(){let e=null,n=0;for(const[r,a]of this.plugins.entries())a!==y.copyRedirectedCacheableResponsesPlugin&&(a===y.defaultPrecacheCacheabilityPlugin&&(e=r),a.cacheWillUpdate&&n++);n===0?this.plugins.push(y.defaultPrecacheCacheabilityPlugin):n>1&&e!==null&&this.plugins.splice(e,1)}}y.defaultPrecacheCacheabilityPlugin={async cacheWillUpdate({response:t}){return!t||t.status>=400?null:t}};y.copyRedirectedCacheableResponsesPlugin={async cacheWillUpdate({response:t}){return t.redirected?await Ne(t):t}};class He{constructor({cacheName:e,plugins:n=[],fallbackToNetwork:r=!0}={}){this._urlsToCacheKeys=new Map,this._urlsToCacheModes=new Map,this._cacheKeysToIntegrities=new Map,this._strategy=new y({cacheName:T.getPrecacheName(e),plugins:[...n,new Fe({precacheController:this})],fallbackToNetwork:r}),this.install=this.install.bind(this),this.activate=this.activate.bind(this)}get strategy(){return this._strategy}precache(e){this.addToCacheList(e),this._installAndActiveListenersAdded||(self.addEventListener("install",this.install),self.addEventListener("activate",this.activate),this._installAndActiveListenersAdded=!0)}addToCacheList(e){const n=[];for(const r of e){typeof r=="string"?n.push(r):r&&r.revision===void 0&&n.push(r.url);const{cacheKey:a,url:s}=We(r),i=typeof r!="string"&&r.revision?"reload":"default";if(this._urlsToCacheKeys.has(s)&&this._urlsToCacheKeys.get(s)!==a)throw new h("add-to-cache-list-conflicting-entries",{firstEntry:this._urlsToCacheKeys.get(s),secondEntry:a});if(typeof r!="string"&&r.integrity){if(this._cacheKeysToIntegrities.has(a)&&this._cacheKeysToIntegrities.get(a)!==r.integrity)throw new h("add-to-cache-list-conflicting-integrities",{url:s});this._cacheKeysToIntegrities.set(a,r.integrity)}if(this._urlsToCacheKeys.set(s,a),this._urlsToCacheModes.set(s,i),n.length>0){const c=`Workbox is precaching URLs without revision info: ${n.join(", ")}
This is generally NOT safe. Learn more at https://bit.ly/wb-precache`;console.warn(c)}}}install(e){return J(e,async()=>{const n=new je;this.strategy.plugins.push(n);for(const[s,i]of this._urlsToCacheKeys){const c=this._cacheKeysToIntegrities.get(i),o=this._urlsToCacheModes.get(s),l=new Request(s,{integrity:c,cache:o,credentials:"same-origin"});await Promise.all(this.strategy.handleAll({params:{cacheKey:i},request:l,event:e}))}const{updatedURLs:r,notUpdatedURLs:a}=n;return{updatedURLs:r,notUpdatedURLs:a}})}activate(e){return J(e,async()=>{const n=await self.caches.open(this.strategy.cacheName),r=await n.keys(),a=new Set(this._urlsToCacheKeys.values()),s=[];for(const i of r)a.has(i.url)||(await n.delete(i),s.push(i.url));return{deletedURLs:s}})}getURLsToCacheKeys(){return this._urlsToCacheKeys}getCachedURLs(){return[...this._urlsToCacheKeys.keys()]}getCacheKeyForURL(e){const n=new URL(e,location.href);return this._urlsToCacheKeys.get(n.href)}getIntegrityForCacheKey(e){return this._cacheKeysToIntegrities.get(e)}async matchPrecache(e){const n=e instanceof Request?e.url:e,r=this.getCacheKeyForURL(n);if(r)return(await self.caches.open(this.strategy.cacheName)).match(r)}createHandlerBoundToURL(e){const n=this.getCacheKeyForURL(e);if(!n)throw new h("non-precached-url",{url:e});return r=>(r.request=new Request(e),r.params=Object.assign({cacheKey:n},r.params),this.strategy.handle(r))}}let S;const ee=()=>(S||(S=new He),S);try{self["workbox:routing:7.0.0"]&&_()}catch{}const te="GET",k=t=>t&&typeof t=="object"?t:{handle:t};class R{constructor(e,n,r=te){this.handler=k(n),this.match=e,this.method=r}setCatchHandler(e){this.catchHandler=k(e)}}class Ye extends R{constructor(e,n,r){const a=({url:s})=>{const i=e.exec(s.href);if(i&&!(s.origin!==location.origin&&i.index!==0))return i.slice(1)};super(a,n,r)}}class Je{constructor(){this._routes=new Map,this._defaultHandlerMap=new Map}get routes(){return this._routes}addFetchListener(){self.addEventListener("fetch",e=>{const{request:n}=e,r=this.handleRequest({request:n,event:e});r&&e.respondWith(r)})}addCacheListener(){self.addEventListener("message",e=>{if(e.data&&e.data.type==="CACHE_URLS"){const{payload:n}=e.data,r=Promise.all(n.urlsToCache.map(a=>{typeof a=="string"&&(a=[a]);const s=new Request(...a);return this.handleRequest({request:s,event:e})}));e.waitUntil(r),e.ports&&e.ports[0]&&r.then(()=>e.ports[0].postMessage(!0))}})}handleRequest({request:e,event:n}){const r=new URL(e.url,location.href);if(!r.protocol.startsWith("http"))return;const a=r.origin===location.origin,{params:s,route:i}=this.findMatchingRoute({event:n,request:e,sameOrigin:a,url:r});let c=i&&i.handler;const o=e.method;if(!c&&this._defaultHandlerMap.has(o)&&(c=this._defaultHandlerMap.get(o)),!c)return;let l;try{l=c.handle({url:r,request:e,event:n,params:s})}catch(u){l=Promise.reject(u)}const d=i&&i.catchHandler;return l instanceof Promise&&(this._catchHandler||d)&&(l=l.catch(async u=>{if(d)try{return await d.handle({url:r,request:e,event:n,params:s})}catch(p){p instanceof Error&&(u=p)}if(this._catchHandler)return this._catchHandler.handle({url:r,request:e,event:n});throw u})),l}findMatchingRoute({url:e,sameOrigin:n,request:r,event:a}){const s=this._routes.get(r.method)||[];for(const i of s){let c;const o=i.match({url:e,sameOrigin:n,request:r,event:a});if(o)return c=o,(Array.isArray(c)&&c.length===0||o.constructor===Object&&Object.keys(o).length===0||typeof o=="boolean")&&(c=void 0),{route:i,params:c}}return{}}setDefaultHandler(e,n=te){this._defaultHandlerMap.set(n,k(e))}setCatchHandler(e){this._catchHandler=k(e)}registerRoute(e){this._routes.has(e.method)||this._routes.set(e.method,[]),this._routes.get(e.method).push(e)}unregisterRoute(e){if(!this._routes.has(e.method))throw new h("unregister-route-but-not-found-with-method",{method:e.method});const n=this._routes.get(e.method).indexOf(e);if(n>-1)this._routes.get(e.method).splice(n,1);else throw new h("unregister-route-route-not-registered")}}let $;const Ve=()=>($||($=new Je,$.addFetchListener(),$.addCacheListener()),$);function Ge(t,e,n){let r;if(typeof t=="string"){const s=new URL(t,location.href),i=({url:c})=>c.href===s.href;r=new R(i,e,n)}else if(t instanceof RegExp)r=new Ye(t,e,n);else if(typeof t=="function")r=new R(t,e,n);else if(t instanceof R)r=t;else throw new h("unsupported-route-type",{moduleName:"workbox-routing",funcName:"registerRoute",paramName:"capture"});return Ve().registerRoute(r),r}function ze(t,e=[]){for(const n of[...t.searchParams.keys()])e.some(r=>r.test(n))&&t.searchParams.delete(n);return t}function*Qe(t,{ignoreURLParametersMatching:e=[/^utm_/,/^fbclid$/],directoryIndex:n="index.html",cleanURLs:r=!0,urlManipulation:a}={}){const s=new URL(t,location.href);s.hash="",yield s.href;const i=ze(s,e);if(yield i.href,n&&i.pathname.endsWith("/")){const c=new URL(i.href);c.pathname+=n,yield c.href}if(r){const c=new URL(i.href);c.pathname+=".html",yield c.href}if(a){const c=a({url:s});for(const o of c)yield o.href}}class Xe extends R{constructor(e,n){const r=({request:a})=>{const s=e.getURLsToCacheKeys();for(const i of Qe(a.url,n)){const c=s.get(i);if(c){const o=e.getIntegrityForCacheKey(c);return{cacheKey:c,integrity:o}}}};super(r,e.strategy)}}function Ze(t){const e=ee(),n=new Xe(e,t);Ge(n)}const et="-precache-",tt=async(t,e=et)=>{const r=(await self.caches.keys()).filter(a=>a.includes(e)&&a.includes(self.registration.scope)&&a!==t);return await Promise.all(r.map(a=>self.caches.delete(a))),r};function nt(){self.addEventListener("activate",t=>{const e=T.getPrecacheName();t.waitUntil(tt(e).then(n=>{}))})}function rt(t){ee().precache(t)}function at(t,e){rt(t),Ze(e)}function ne(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function st(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const r=ne(n);return(a,s)=>r.then(i=>s(i.transaction(e,a).objectStore(e)))}let K;function it(){return K||(K=st("keyval-store","keyval")),K}function ct(t,e=it()){return e("readonly",n=>ne(n.get(t)))}function E(t,e){return t-e*Math.floor(t/e)}const re=1721426;function v(t,e,n,r){e=W(t,e);let a=e-1,s=-2;return n<=2?s=0:U(e)&&(s=-1),re-1+365*a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400)+Math.floor((367*n-362)/12+s+r)}function U(t){return t%4===0&&(t%100!==0||t%400===0)}function W(t,e){return t==="BC"?1-e:e}function ot(t){let e="AD";return t<=0&&(e="BC",t=1-t),[e,t]}const lt={standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]};class P{fromJulianDay(e){let n=e,r=n-re,a=Math.floor(r/146097),s=E(r,146097),i=Math.floor(s/36524),c=E(s,36524),o=Math.floor(c/1461),l=E(c,1461),d=Math.floor(l/365),u=a*400+i*100+o*4+d+(i!==4&&d!==4?1:0),[p,w]=ot(u),_e=n-v(p,w,1,1),I=2;n<v(p,w,3,1)?I=0:U(w)&&(I=1);let H=Math.floor(((_e+I)*12+373)/367),xe=n-v(p,w,H,1)+1;return new C(p,w,H,xe)}toJulianDay(e){return v(e.era,e.year,e.month,e.day)}getDaysInMonth(e){return lt[U(e.year)?"leapyear":"standard"][e.month-1]}getMonthsInYear(e){return 12}getDaysInYear(e){return U(e.year)?366:365}getYearsInEra(e){return 9999}getEras(){return["BC","AD"]}isInverseEra(e){return e.era==="BC"}balanceDate(e){e.year<=0&&(e.era=e.era==="BC"?"AD":"BC",e.year=1-e.year)}constructor(){this.identifier="gregory"}}function ae(t,e){return t.calendar.toJulianDay(t)-e.calendar.toJulianDay(e)}function se(t,e){return V(t)-V(e)}function V(t){return t.hour*36e5+t.minute*6e4+t.second*1e3+t.millisecond}let N=null;function ie(){return N==null&&(N=new Intl.DateTimeFormat().resolvedOptions().timeZone),N}function G(t){t=j(t,new P);let e=W(t.era,t.year);return ce(e,t.month,t.day,t.hour,t.minute,t.second,t.millisecond)}function ce(t,e,n,r,a,s,i){let c=new Date;return c.setUTCHours(r,a,s,i),c.setUTCFullYear(t,e-1,n),c.getTime()}function z(t,e){if(e==="UTC")return 0;if(t>0&&e===ie())return new Date(t).getTimezoneOffset()*-6e4;let{year:n,month:r,day:a,hour:s,minute:i,second:c}=oe(t,e);return ce(n,r,a,s,i,c,0)-Math.floor(t/1e3)*1e3}const Q=new Map;function oe(t,e){let n=Q.get(e);n||(n=new Intl.DateTimeFormat("en-US",{timeZone:e,hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),Q.set(e,n));let r=n.formatToParts(new Date(t)),a={};for(let s of r)s.type!=="literal"&&(a[s.type]=s.value);return{year:a.era==="BC"||a.era==="B"?-a.year+1:+a.year,month:+a.month,day:+a.day,hour:a.hour==="24"?0:+a.hour,minute:+a.minute,second:+a.second}}const X=864e5;function ht(t,e,n,r){return(n===r?[n]:[n,r]).filter(s=>ut(t,e,s))}function ut(t,e,n){let r=oe(n,e);return t.year===r.year&&t.month===r.month&&t.day===r.day&&t.hour===r.hour&&t.minute===r.minute&&t.second===r.second}function ft(t,e,n="compatible"){let r=he(t);if(e==="UTC")return G(r);if(e===ie()&&n==="compatible"){r=j(r,new P);let o=new Date,l=W(r.era,r.year);return o.setFullYear(l,r.month-1,r.day),o.setHours(r.hour,r.minute,r.second,r.millisecond),o.getTime()}let a=G(r),s=z(a-X,e),i=z(a+X,e),c=ht(r,e,a-s,a-i);if(c.length===1)return c[0];if(c.length>1)switch(n){case"compatible":case"earlier":return c[0];case"later":return c[c.length-1];case"reject":throw new RangeError("Multiple possible absolute times found")}switch(n){case"earlier":return Math.min(a-s,a-i);case"compatible":case"later":return Math.max(a-s,a-i);case"reject":throw new RangeError("No such absolute time found")}}function le(t,e,n="compatible"){return new Date(ft(t,e,n))}function he(t,e){let n=0,r=0,a=0,s=0;if("timeZone"in t)({hour:n,minute:r,second:a,millisecond:s}=t);else if("hour"in t&&!e)return t;return e&&({hour:n,minute:r,second:a,millisecond:s}=e),new D(t.calendar,t.era,t.year,t.month,t.day,n,r,a,s)}function j(t,e){if(t.calendar.identifier===e.identifier)return t;let n=e.fromJulianDay(t.calendar.toJulianDay(t)),r=t.copy();return r.calendar=e,r.era=n.era,r.year=n.year,r.month=n.month,r.day=n.day,m(r),r}function F(t,e){let n=t.copy(),r="hour"in n?me(n,e):0;O(n,e.years||0),n.calendar.balanceYearMonth&&n.calendar.balanceYearMonth(n,t),n.month+=e.months||0,A(n),ue(n),n.day+=(e.weeks||0)*7,n.day+=e.days||0,n.day+=r,dt(n),n.calendar.balanceDate&&n.calendar.balanceDate(n),n.year<1&&(n.year=1,n.month=1,n.day=1);let a=n.calendar.getYearsInEra(n);if(n.year>a){var s,i;let o=(s=(i=n.calendar).isInverseEra)===null||s===void 0?void 0:s.call(i,n);n.year=a,n.month=o?1:n.calendar.getMonthsInYear(n),n.day=o?1:n.calendar.getDaysInMonth(n)}n.month<1&&(n.month=1,n.day=1);let c=n.calendar.getMonthsInYear(n);return n.month>c&&(n.month=c,n.day=n.calendar.getDaysInMonth(n)),n.day=Math.max(1,Math.min(n.calendar.getDaysInMonth(n),n.day)),n}function O(t,e){var n,r;!((n=(r=t.calendar).isInverseEra)===null||n===void 0)&&n.call(r,t)&&(e=-e),t.year+=e}function A(t){for(;t.month<1;)O(t,-1),t.month+=t.calendar.getMonthsInYear(t);let e=0;for(;t.month>(e=t.calendar.getMonthsInYear(t));)t.month-=e,O(t,1)}function dt(t){for(;t.day<1;)t.month--,A(t),t.day+=t.calendar.getDaysInMonth(t);for(;t.day>t.calendar.getDaysInMonth(t);)t.day-=t.calendar.getDaysInMonth(t),t.month++,A(t)}function ue(t){t.month=Math.max(1,Math.min(t.calendar.getMonthsInYear(t),t.month)),t.day=Math.max(1,Math.min(t.calendar.getDaysInMonth(t),t.day))}function m(t){t.calendar.constrainDate&&t.calendar.constrainDate(t),t.year=Math.max(1,Math.min(t.calendar.getYearsInEra(t),t.year)),ue(t)}function fe(t){let e={};for(let n in t)typeof t[n]=="number"&&(e[n]=-t[n]);return e}function de(t,e){return F(t,fe(e))}function ye(t,e){let n=t.copy();return e.era!=null&&(n.era=e.era),e.year!=null&&(n.year=e.year),e.month!=null&&(n.month=e.month),e.day!=null&&(n.day=e.day),m(n),n}function ge(t,e){let n=t.copy();return e.hour!=null&&(n.hour=e.hour),e.minute!=null&&(n.minute=e.minute),e.second!=null&&(n.second=e.second),e.millisecond!=null&&(n.millisecond=e.millisecond),pe(n),n}function yt(t){t.second+=Math.floor(t.millisecond/1e3),t.millisecond=x(t.millisecond,1e3),t.minute+=Math.floor(t.second/60),t.second=x(t.second,60),t.hour+=Math.floor(t.minute/60),t.minute=x(t.minute,60);let e=Math.floor(t.hour/24);return t.hour=x(t.hour,24),e}function pe(t){t.millisecond=Math.max(0,Math.min(t.millisecond,1e3)),t.second=Math.max(0,Math.min(t.second,59)),t.minute=Math.max(0,Math.min(t.minute,59)),t.hour=Math.max(0,Math.min(t.hour,23))}function x(t,e){let n=t%e;return n<0&&(n+=e),n}function me(t,e){return t.hour+=e.hours||0,t.minute+=e.minutes||0,t.second+=e.seconds||0,t.millisecond+=e.milliseconds||0,yt(t)}function we(t,e){let n=t.copy();return me(n,e),n}function gt(t,e){return we(t,fe(e))}function be(t,e,n,r){let a=t.copy();switch(e){case"era":{let c=t.calendar.getEras(),o=c.indexOf(t.era);if(o<0)throw new Error("Invalid era: "+t.era);o=g(o,n,0,c.length-1,r==null?void 0:r.round),a.era=c[o],m(a);break}case"year":var s,i;!((s=(i=a.calendar).isInverseEra)===null||s===void 0)&&s.call(i,a)&&(n=-n),a.year=g(t.year,n,-1/0,9999,r==null?void 0:r.round),a.year===-1/0&&(a.year=1),a.calendar.balanceYearMonth&&a.calendar.balanceYearMonth(a,t);break;case"month":a.month=g(t.month,n,1,t.calendar.getMonthsInYear(t),r==null?void 0:r.round);break;case"day":a.day=g(t.day,n,1,t.calendar.getDaysInMonth(t),r==null?void 0:r.round);break;default:throw new Error("Unsupported field "+e)}return t.calendar.balanceDate&&t.calendar.balanceDate(a),m(a),a}function $e(t,e,n,r){let a=t.copy();switch(e){case"hour":{let s=t.hour,i=0,c=23;if((r==null?void 0:r.hourCycle)===12){let o=s>=12;i=o?12:0,c=o?23:11}a.hour=g(s,n,i,c,r==null?void 0:r.round);break}case"minute":a.minute=g(t.minute,n,0,59,r==null?void 0:r.round);break;case"second":a.second=g(t.second,n,0,59,r==null?void 0:r.round);break;case"millisecond":a.millisecond=g(t.millisecond,n,0,999,r==null?void 0:r.round);break;default:throw new Error("Unsupported field "+e)}return a}function g(t,e,n,r,a=!1){if(a){t+=Math.sign(e),t<n&&(t=r);let s=Math.abs(e);e>0?t=Math.ceil(t/s)*s:t=Math.floor(t/s)*s,t>r&&(t=n)}else t+=e,t<n?t=r-(n-t-1):t>r&&(t=n+(t-r-1));return t}function Re(t){return`${String(t.hour).padStart(2,"0")}:${String(t.minute).padStart(2,"0")}:${String(t.second).padStart(2,"0")}${t.millisecond?String(t.millisecond/1e3).slice(1):""}`}function Ce(t){let e=j(t,new P);return`${String(e.year).padStart(4,"0")}-${String(e.month).padStart(2,"0")}-${String(e.day).padStart(2,"0")}`}function pt(t){return`${Ce(t)}T${Re(t)}`}function mt(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function q(t,e,n){mt(t,e),e.set(t,n)}function Me(t){let e=typeof t[0]=="object"?t.shift():new P,n;if(typeof t[0]=="string")n=t.shift();else{let i=e.getEras();n=i[i.length-1]}let r=t.shift(),a=t.shift(),s=t.shift();return[e,n,r,a,s]}var wt=new WeakMap;class C{copy(){return this.era?new C(this.calendar,this.era,this.year,this.month,this.day):new C(this.calendar,this.year,this.month,this.day)}add(e){return F(this,e)}subtract(e){return de(this,e)}set(e){return ye(this,e)}cycle(e,n,r){return be(this,e,n,r)}toDate(e){return le(this,e)}toString(){return Ce(this)}compare(e){return ae(this,e)}constructor(...e){q(this,wt,{writable:!0,value:void 0});let[n,r,a,s,i]=Me(e);this.calendar=n,this.era=r,this.year=a,this.month=s,this.day=i,m(this)}}var bt=new WeakMap;class B{copy(){return new B(this.hour,this.minute,this.second,this.millisecond)}add(e){return we(this,e)}subtract(e){return gt(this,e)}set(e){return ge(this,e)}cycle(e,n,r){return $e(this,e,n,r)}toString(){return Re(this)}compare(e){return se(this,e)}constructor(e=0,n=0,r=0,a=0){q(this,bt,{writable:!0,value:void 0}),this.hour=e,this.minute=n,this.second=r,this.millisecond=a,pe(this)}}var $t=new WeakMap;class D{copy(){return this.era?new D(this.calendar,this.era,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond):new D(this.calendar,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond)}add(e){return F(this,e)}subtract(e){return de(this,e)}set(e){return ye(ge(this,e),e)}cycle(e,n,r){switch(e){case"era":case"year":case"month":case"day":return be(this,e,n,r);default:return $e(this,e,n,r)}}toDate(e,n){return le(this,e,n)}toString(){return pt(this)}compare(e){let n=ae(this,e);return n===0?se(this,he(e)):n}constructor(...e){q(this,$t,{writable:!0,value:void 0});let[n,r,a,s,i]=Me(e);this.calendar=n,this.era=r,this.year=a,this.month=s,this.day=i,this.hour=e.shift()||0,this.minute=e.shift()||0,this.second=e.shift()||0,this.millisecond=e.shift()||0,m(this)}}const ve="https://server-wild-wave-7018.fly.dev";self.skipWaiting();Oe();nt();at([{"revision":"2c7579a2a4faaf574605ecf87d2ca5b7","url":"manifest.webmanifest"}]);navigator.permissions.query({name:"notifications"}).then(async t=>{t.state!=="granted"?(console.log("Permission not granted, listening for change"),t.addEventListener("change",async()=>{console.log("Notification permission changed to",t.state),await Z()})):(console.log("Permission already granted, registering for push"),await Z())});console.log("Adding push event listener");self.addEventListener("push",t=>{var n;const e=((n=t.data)==null?void 0:n.text())??"no payload";console.log(`payload: ${e}`),e==="heartbeat"&&t.waitUntil(Ct().then(r=>{vt(r)}))});async function Z(){let t=await self.registration.pushManager.getSubscription();t?console.log(`Existing subscription found: ${JSON.stringify(t)}`):t=await Rt(),console.log(`Sending subscription to server: ${JSON.stringify(t)}`),await fetch(ve+"/register",{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify(t)})}async function Rt(){console.log("Getting vapidPublicKey");const e=await(await fetch(ve+"/vapidPublicKey")).text(),n=_t(e);return console.log("Creating subscription"),await self.registration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:n})}async function Ct(){return Mt((await ct("alarms")??[]).map(({name:t,date:e,time:n,warnings:r})=>({name:t,date:new C(e.year,e.month,e.day),time:new B(n.hour,n.minute),warnings:r})))}function Mt(t){return t.sort((e,n)=>{const r=new Date(e.date.toString()+"T"+e.time.toString());return new Date(n.date.toString()+"T"+n.time.toString()).getTime()-r.getTime()})}function vt(t){const e=t.map(n=>{const r=new Date,a=new Date(n.date.year,n.date.month-1,n.date.day,n.time.hour,n.time.minute);return console.log(`Checking alarm now:${r.toISOString()}, alarm:${a.toISOString()}`),r>a?(console.log("Alarm was supposed to go off"),self.registration.showNotification(`"${n.name}" at ${a.toTimeString()}`,{body:"Alarm"})):Promise.resolve()});return Promise.all(e)}function _t(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),a=new Uint8Array(r.length);for(let s=0;s<r.length;++s)a[s]=r.charCodeAt(s);return a}
